{
  "id": "115-1",
  "title": "CS 115 Final",
  "time": "2.5 hours",
  "totalPoints": 75,
  "description": "Full practice exam covering all course content for CS 115. Function design, recursion, lists, structures, trees.",
  "content": [
    {
      "type": "text",
      "content": "### General Instructions\n- Assume the language of choice for all questions is Beginning Student with List Abbreviations, unless otherwise specified.\n- For full marks, keep everything in the most simplified form, and use standard notations only. Examples: `(list 1 2 3)` is better than `'(1 2 3)`, and `true`/`false` is better than `#t`/`#f`. Use your best judgement to determine when to use the simpler form.\n- In general, if a question is asking you to write a function that already exists in Racket, you should not use the original function name. For example, if a question asks you to write a function `my-length` that does the same thing as `length`, you should not use the name `length` in your implementation.\n- Because you are writing code with a keyboard and highlighting, the quality expected is much higher than when you are writing by hand, so the grading is done by actually *running* your code. If there is a syntax error, you do not get *any* marks."
    },
    {
      "type": "section",
      "title": "Fill in the following blanks with the most appropriate words, numbers, or expressions:",
      "content": [
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Executing the code `(+ 2 3)` will produce:",
          "verification": "const t=s=>(/\\b5\\b/).test(s.trim())?1:0;",
          "explanation": "2 + 3 = 5."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Executing the code `(* 4 5)` will produce:",
          "verification": "const t=s=>(/\\b20\\b/).test(s.trim())?1:0;",
          "explanation": "4 * 5 = 20."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Executing the code `(- 10 3)` will produce:",
          "verification": "const t=s=>(/\\b7\\b/).test(s.trim())?1:0;",
          "explanation": "10 - 3 = 7."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Executing the code `(string-append \"Hello\" \" \" \"World\")` will produce:",
          "verification": "const t=s=>(/Hello\\s*World/i).test(s.trim())?1:0;",
          "explanation": "The function `string-append` concatenates strings, producing `\"Hello World\"`."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Executing the code `(first (list 5 10 15))` will produce:",
          "verification": "const t=s=>(/\\b5\\b/).test(s.trim())?1:0;",
          "explanation": "The function `first` returns the first element of the list, which is 5."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Executing the code `(rest (list 'a 'b 'c))` will produce:",
          "verification": "const t=s=>(/b/.test(s)&&/c/.test(s)&&!/a/.test(s))?1:0;",
          "explanation": "The function `rest` removes the first element, producing `(list 'b 'c)`."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Executing the code `(empty? (list 1))` will produce:",
          "verification": "const t=s=>(/^\\s*false\\s*$/i).test(s.trim())?1:0;",
          "explanation": "The list `(list 1)` is not empty, so `empty?` returns `false`."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Executing the code `(cons 1 (list 2 3))` will produce:",
          "verification": "const t=s=>(/1/.test(s)&&/2/.test(s)&&/3/.test(s))?1:0;",
          "explanation": "The function `cons` adds 1 to the front of the list, producing `(list 1 2 3)`."
        }
      ]
    },
    {
      "type": "section",
      "title": "Write the following simple functions:",
      "content": [
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write a function `square` that consumes a number and produces the square of that number (the number multiplied by itself).",
          "starterCode": "(define (square n))",
          "hiddenCases": [
            "(check-expect (square 3) 9)",
            "(check-expect (square 0) 0)",
            "(check-expect (square 5) 25)"
          ],
          "explanation": "Simply multiply the number by itself: `(* n n)`."
        },
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write a function `is-even?` that consumes a natural number and produces `true` if the number is even and `false` otherwise.",
          "starterCode": "(define (is-even? n))",
          "hiddenCases": [
            "(check-expect (is-even? 4) true)",
            "(check-expect (is-even? 7) false)",
            "(check-expect (is-even? 0) true)"
          ],
          "explanation": "Use `(zero? (remainder n 2))` or `(even? n)` to check if the number is divisible by 2."
        },
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write a function `bigger` that consumes two numbers and produces the larger of the two.",
          "starterCode": "(define (bigger a b))",
          "hiddenCases": [
            "(check-expect (bigger 3 7) 7)",
            "(check-expect (bigger 10 2) 10)",
            "(check-expect (bigger 5 5) 5)"
          ],
          "explanation": "Use `(if (> a b) a b)` or the built-in `max` function."
        }
      ]
    },
    {
      "type": "section",
      "title": "Read the following carefully and then write the function:",
      "description": "A local bakery wants to track their inventory of pastries. Each pastry has a name, a price, and the number of items in stock. They have defined the following structure:",
      "content": [
        {
          "type": "code",
          "content": "(define-struct pastry (name price quantity))"
        },
        {
          "type": "text",
          "content": "A pastry has a `name` (string), a `price` (positive number representing dollars), and `quantity` (natural number representing how many are in stock)."
        },
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Define a constant `croissant` for a pastry named \"Croissant\" that costs 3.50 and has 12 in stock:",
          "starterCode": "(define-struct pastry (name price quantity))\n\n(define croissant)",
          "hiddenCases": [
            "(check-expect (pastry-name croissant) \"Croissant\")",
            "(check-expect (pastry-price croissant) 3.50)",
            "(check-expect (pastry-quantity croissant) 12)"
          ],
          "explanation": "Use `make-pastry` with the given values: `(make-pastry \"Croissant\" 3.50 12)`."
        },
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write a function `pastry-value` that consumes a pastry and produces the total value of that pastry type in stock (price times quantity):",
          "starterCode": "(define-struct pastry (name price quantity))\n\n(define (pastry-value p))",
          "hiddenCases": [
            "(check-expect (pastry-value (make-pastry \"Muffin\" 2.00 5)) 10.00)",
            "(check-expect (pastry-value (make-pastry \"Cookie\" 1.50 10)) 15.00)",
            "(check-expect (pastry-value (make-pastry \"Cake\" 25.00 0)) 0)"
          ],
          "explanation": "Multiply the price by the quantity: `(* (pastry-price p) (pastry-quantity p))`."
        },
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write a function `in-stock?` that consumes a pastry and produces `true` if there is at least one in stock:",
          "starterCode": "(define-struct pastry (name price quantity))\n\n(define (in-stock? p))",
          "hiddenCases": [
            "(check-expect (in-stock? (make-pastry \"Bagel\" 2.00 5)) true)",
            "(check-expect (in-stock? (make-pastry \"Donut\" 1.00 0)) false)",
            "(check-expect (in-stock? (make-pastry \"Bun\" 0.75 1)) true)"
          ],
          "explanation": "Check if quantity is greater than 0: `(> (pastry-quantity p) 0)`."
        }
      ]
    },
    {
      "type": "section",
      "title": "Write the following recursive functions:",
      "content": [
        {
          "type": "question",
          "points": 4,
          "prompt": "code",
          "content": "Write a function `sum-list` that consumes a list of numbers and produces the sum of all numbers in the list.",
          "starterCode": "(define (sum-list lst))",
          "hiddenCases": [
            "(check-expect (sum-list (list 1 2 3)) 6)",
            "(check-expect (sum-list empty) 0)",
            "(check-expect (sum-list (list 10 20 30)) 60)"
          ],
          "explanation": "Use recursion: if the list is empty, return 0. Otherwise, add the first element to the sum of the rest."
        },
        {
          "type": "question",
          "points": 4,
          "prompt": "code",
          "content": "Write a function `count-items` that consumes a list and produces the number of items in the list (without using the built-in `length` function).",
          "starterCode": "(define (count-items lst))",
          "hiddenCases": [
            "(check-expect (count-items (list 'a 'b 'c)) 3)",
            "(check-expect (count-items empty) 0)",
            "(check-expect (count-items (list 1 2 3 4 5)) 5)"
          ],
          "explanation": "Use recursion: if the list is empty, return 0. Otherwise, add 1 to the count of the rest."
        },
        {
          "type": "question",
          "points": 4,
          "prompt": "code",
          "content": "Write a function `all-positive?` that consumes a list of numbers and produces `true` if all numbers are positive, `false` otherwise. An empty list should return `true`.",
          "starterCode": "(define (all-positive? lst))",
          "hiddenCases": [
            "(check-expect (all-positive? (list 1 2 3)) true)",
            "(check-expect (all-positive? (list 1 -2 3)) false)",
            "(check-expect (all-positive? empty) true)"
          ],
          "explanation": "Use recursion: if empty, return true. Otherwise, check if the first element is positive and recursively check the rest."
        },
        {
          "type": "question",
          "points": 4,
          "prompt": "code",
          "content": "Write a function `keep-positives` that consumes a list of numbers and produces a list containing only the positive numbers.",
          "starterCode": "(define (keep-positives lst))",
          "hiddenCases": [
            "(check-expect (keep-positives (list 1 -2 3 -4 5)) (list 1 3 5))",
            "(check-expect (keep-positives empty) empty)",
            "(check-expect (keep-positives (list -1 -2 -3)) empty)"
          ],
          "explanation": "Use recursion: if empty, return empty. If first is positive, cons it to the result of processing the rest. Otherwise, skip it."
        }
      ]
    },
    {
      "type": "section",
      "title": "Read the following and then fill in the blanks:",
      "description": "For the expression below, show the **first** and **second** substitution steps, and then give the **final value**. If the evaluation would produce an error, simply write `error` instead.",
      "content": [
        {
          "type": "code",
          "content": "(+ 1 (+ 2 3))"
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "1st step:",
          "verification": "const t = s => ((/^\\(\\s*\\+\\s*1\\s+5\\s*\\)$/u).test(s.trim()) ? 1 : 0);",
          "explanation": "The first substitution step evaluates `(+ 2 3)` to `5`, giving `(+ 1 5)`."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Final value:",
          "verification": "const t = s => s.trim() === '6' ? 1 : 0;",
          "explanation": "The final value is `6`, because `(+ 1 5) = 6`."
        }
      ]
    },
    {
      "type": "section",
      "title": "Read the following and then fill in the blanks:",
      "description": "For the expression below, show the **first** and **second** substitution steps, and then give the **final value**.",
      "content": [
        {
          "type": "code",
          "content": "(define (double x)\n  (* 2 x))\n\n(double (+ 1 2))"
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "1st step:",
          "verification": "const t = s => ((/^\\(\\s*double\\s+3\\s*\\)$/u).test(s.trim()) ? 1 : 0);",
          "explanation": "The first substitution step evaluates `(+ 1 2)` to `3`, giving `(double 3)`."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "2nd step:",
          "verification": "const t = s => ((/^\\(\\s*\\*\\s*2\\s+3\\s*\\)$/u).test(s.trim()) ? 1 : 0);",
          "explanation": "The second step expands the function call to `(* 2 3)`."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Final value:",
          "verification": "const t = s => s.trim() === '6' ? 1 : 0;",
          "explanation": "The final value is `6`, because `(* 2 3) = 6`."
        }
      ]
    },
    {
      "type": "section",
      "title": "Read the following and then fill in the blanks:",
      "description": "For the expression below, show the **first** and **second** substitution steps, and then give the **final value**.",
      "content": [
        {
          "type": "code",
          "content": "(first (rest (list 10 20 30)))"
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "1st step:",
          "verification": "const t = s => ((/^\\(\\s*first\\s*\\(\\s*list\\s+20\\s+30\\s*\\)\\s*\\)$/u).test(s.trim()) ? 1 : 0);",
          "explanation": "The first substitution step evaluates `(rest (list 10 20 30))` to `(list 20 30)`, giving `(first (list 20 30))`."
        },
        {
          "type": "question",
          "points": 1,
          "prompt": "single-line-textbox",
          "content": "Final value:",
          "verification": "const t = s => s.trim() === '20' ? 1 : 0;",
          "explanation": "The final value is `20`, because `(first (list 20 30))` returns the first element."
        }
      ]
    },
    {
      "type": "section",
      "title": "Write the following functions using abstract list functions:",
      "description": "For the following questions, use abstract list functions like `map`, `filter`, and `foldr` instead of explicit recursion.",
      "content": [
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write a function `add-one-to-all` that consumes a list of numbers and produces a list where each number has been increased by 1.",
          "starterCode": "(define (add-one-to-all lst))",
          "hiddenCases": [
            "(check-expect (add-one-to-all (list 1 2 3)) (list 2 3 4))",
            "(check-expect (add-one-to-all empty) empty)",
            "(check-expect (add-one-to-all (list 0 5 10)) (list 1 6 11))"
          ],
          "explanation": "Use `map` with `add1`: `(map add1 lst)`."
        },
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write a function `only-evens` that consumes a list of numbers and produces a list containing only the even numbers.",
          "starterCode": "(define (only-evens lst))",
          "hiddenCases": [
            "(check-expect (only-evens (list 1 2 3 4 5 6)) (list 2 4 6))",
            "(check-expect (only-evens empty) empty)",
            "(check-expect (only-evens (list 1 3 5)) empty)"
          ],
          "explanation": "Use `filter` with `even?`: `(filter even? lst)`."
        },
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write a function `product` that consumes a list of numbers and produces the product of all numbers. An empty list should produce 1.",
          "starterCode": "(define (product lst))",
          "hiddenCases": [
            "(check-expect (product (list 1 2 3 4)) 24)",
            "(check-expect (product empty) 1)",
            "(check-expect (product (list 5 2 3)) 30)"
          ],
          "explanation": "Use `foldr` with multiplication: `(foldr * 1 lst)`."
        }
      ]
    },
    {
      "type": "section",
      "title": "Read the following carefully and then write the function:",
      "description": "A pet store wants to keep track of their animals. Each animal has a name, species, and age. The structure is defined as:",
      "content": [
        {
          "type": "code",
          "content": "(define-struct animal (name species age))"
        },
        {
          "type": "text",
          "content": "An animal has a `name` (string), `species` (string like \"dog\", \"cat\", or \"fish\"), and `age` (natural number representing years)."
        },
        {
          "type": "question",
          "points": 3,
          "prompt": "code",
          "content": "Write a function `is-senior?` that consumes an animal and produces `true` if the animal is 8 years old or older:",
          "starterCode": "(define-struct animal (name species age))\n\n(define (is-senior? a))",
          "hiddenCases": [
            "(check-expect (is-senior? (make-animal \"Buddy\" \"dog\" 10)) true)",
            "(check-expect (is-senior? (make-animal \"Whiskers\" \"cat\" 5)) false)",
            "(check-expect (is-senior? (make-animal \"Goldie\" \"fish\" 8)) true)"
          ],
          "explanation": "Check if the age is 8 or more: `(>= (animal-age a) 8)`."
        },
        {
          "type": "question",
          "points": 3,
          "prompt": "code",
          "content": "Write a function `find-dogs` that consumes a list of animals and produces a list containing only the dogs:",
          "starterCode": "(define-struct animal (name species age))\n\n(define (find-dogs lst))",
          "hiddenCases": [
            "(check-expect (find-dogs (list (make-animal \"Buddy\" \"dog\" 5) (make-animal \"Whiskers\" \"cat\" 3) (make-animal \"Rex\" \"dog\" 2))) (list (make-animal \"Buddy\" \"dog\" 5) (make-animal \"Rex\" \"dog\" 2)))",
            "(check-expect (find-dogs empty) empty)",
            "(check-expect (find-dogs (list (make-animal \"Whiskers\" \"cat\" 3))) empty)"
          ],
          "explanation": "Use `filter` with a predicate that checks if species is \"dog\": `(filter (lambda (a) (string=? (animal-species a) \"dog\")) lst)`."
        }
      ]
    },
    {
      "type": "section",
      "title": "Read the following carefully and then write the function:",
      "description": "Write a function that determines if a student passes a course based on their grade.",
      "content": [
        {
          "type": "text",
          "content": "**Grading Rules:**\n- A grade of 50 or above is a pass.\n- A grade below 50 is a fail.\n- A grade above 100 or below 0 is invalid and should produce the symbol `'invalid`."
        },
        {
          "type": "question",
          "points": 3,
          "prompt": "code",
          "content": "Write the function `grade-result` that consumes a number (the grade) and produces `'pass`, `'fail`, or `'invalid`:",
          "starterCode": "(define (grade-result grade))",
          "hiddenCases": [
            "(check-expect (grade-result 75) 'pass)",
            "(check-expect (grade-result 45) 'fail)",
            "(check-expect (grade-result 50) 'pass)",
            "(check-expect (grade-result 105) 'invalid)",
            "(check-expect (grade-result -5) 'invalid)"
          ],
          "explanation": "Use `cond` to check the conditions: first check if invalid (below 0 or above 100), then check if pass (50 or above), otherwise fail."
        }
      ]
    },
    {
      "type": "section",
      "title": "Read the following carefully and then write the function:",
      "description": "Write a function to calculate the area of a circle. The formula for the area of a circle is $A = \\pi r^2$, where $r$ is the radius.",
      "content": [
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Write the function `circle-area` that consumes the radius of a circle and produces its area. You may use the constant `pi` which is built into Racket:",
          "starterCode": "(define (circle-area radius))",
          "hiddenCases": [
            "(check-within (circle-area 1) pi 0.001)",
            "(check-within (circle-area 2) (* 4 pi) 0.001)",
            "(check-within (circle-area 0) 0 0.001)"
          ],
          "explanation": "Multiply pi by the square of the radius: `(* pi radius radius)` or `(* pi (sqr radius))`."
        }
      ]
    },
    {
      "type": "section",
      "title": "Read the following carefully and then write the function:",
      "description": "A video game store keeps track of their games using a Binary Search Tree (BST). Each game has a title and a rating. The store uses the following structure to organize their collection:",
      "content": [
        {
          "type": "code",
          "content": "(define-struct game (left right title rating))"
        },
        {
          "type": "text",
          "content": "Each node represents a game. The `left` and `right` fields are either `empty` or another game node. The `title` field is a string and is the key (compared using `string<?`, which returns true if the first string comes before the second alphabetically). The `rating` field is a natural number from 1 to 10."
        },
        {
          "type": "question",
          "points": 2,
          "prompt": "code",
          "content": "Define a new game `zelda` for the game titled \"Zelda\" with a rating of 10:",
          "starterCode": "(define-struct game (left right title rating))\n\n(define zelda)",
          "hiddenCases": [
            "(check-expect (game-title zelda) \"Zelda\")",
            "(check-expect (game-rating zelda) 10)",
            "(check-expect (game-left zelda) empty)",
            "(check-expect (game-right zelda) empty)"
          ],
          "explanation": "Create a game node with empty left and right fields: `(make-game empty empty \"Zelda\" 10)`."
        },
        {
          "type": "question",
          "points": 5,
          "prompt": "code",
          "content": "Write a function `game-in-tree?` that takes a title (string) and a BST of games, and returns `true` if a game with that title exists in the tree, `false` otherwise:",
          "starterCode": "(define-struct game (left right title rating))\n\n(define (game-in-tree? title t))",
          "hiddenCases": [
            "(check-expect (game-in-tree? \"Zelda\" empty) false)",
            "(check-expect (game-in-tree? \"Mario\" (make-game empty empty \"Mario\" 9)) true)",
            "(check-expect (game-in-tree? \"Zelda\" (make-game empty empty \"Mario\" 9)) false)",
            "(check-expect (game-in-tree? \"Mario\" (make-game (make-game empty empty \"Kirby\" 8) (make-game empty empty \"Zelda\" 10) \"Mario\" 9)) true)",
            "(check-expect (game-in-tree? \"Kirby\" (make-game (make-game empty empty \"Kirby\" 8) (make-game empty empty \"Zelda\" 10) \"Mario\" 9)) true)"
          ],
          "explanation": "Use BST search: if the tree is empty, return false. If the title matches the current node, return true. If the target title is less than the current title (using `string<?`), search the left subtree. Otherwise, search the right subtree."
        },
        {
          "type": "question",
          "points": 4,
          "prompt": "code",
          "content": "Write a function `count-games` that takes a BST of games and returns the total number of games in the tree:",
          "starterCode": "(define-struct game (left right title rating))\n\n(define (count-games t))",
          "hiddenCases": [
            "(check-expect (count-games empty) 0)",
            "(check-expect (count-games (make-game empty empty \"Mario\" 9)) 1)",
            "(check-expect (count-games (make-game (make-game empty empty \"Kirby\" 8) (make-game empty empty \"Zelda\" 10) \"Mario\" 9)) 3)"
          ],
          "explanation": "Use tree recursion: if the tree is empty, return 0. Otherwise, return 1 plus the count of games in the left subtree plus the count of games in the right subtree."
        },
        {
          "type": "question",
          "points": 4,
          "prompt": "code",
          "content": "Write a function `all-titles` that takes a BST of games and returns a list of all game titles in the tree. The order of titles in the list does not matter:",
          "starterCode": "(define-struct game (left right title rating))\n\n(define (all-titles t))",
          "hiddenCases": [
            "(check-expect (all-titles empty) empty)",
            "(check-expect (all-titles (make-game empty empty \"Mario\" 9)) (list \"Mario\"))",
            "(check-expect (length (all-titles (make-game (make-game empty empty \"Kirby\" 8) (make-game empty empty \"Zelda\" 10) \"Mario\" 9))) 3)",
            "(check-expect (member? \"Mario\" (all-titles (make-game (make-game empty empty \"Kirby\" 8) (make-game empty empty \"Zelda\" 10) \"Mario\" 9))) true)",
            "(check-expect (member? \"Zelda\" (all-titles (make-game (make-game empty empty \"Kirby\" 8) (make-game empty empty \"Zelda\" 10) \"Mario\" 9))) true)"
          ],
          "explanation": "Use tree recursion: if the tree is empty, return empty. Otherwise, combine the current title with the titles from the left and right subtrees using `cons` and `append`."
        }
      ]
    }
  ]
}

